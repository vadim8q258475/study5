{"ast":null,"code":"var _jsxFileName = \"/home/user/first_django/frontend/src/components/main/main.js\",\n  _s = $RefreshSig$();\nimport Footer from \"../footer/footer\";\nimport Header from \"../header/header\";\nimport \"./main.css\";\nimport { trackPromise, usePromiseTracker } from \"react-promise-tracker\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst area = \"isAuth\";\nconst apiUrl = \"http://127.0.0.1:8000\";\nfunction Main(props) {\n  _s();\n  const [isAuth, setIsAuth] = useState(false);\n  const {\n    promiseInProgress\n  } = usePromiseTracker({\n    area\n  });\n  if (localStorage.length === 0) {\n    localStorage.setItem(\"token\", \"\");\n    console.log(\"token\");\n  }\n  useEffect(() => {\n    const instance = axios.create({\n      baseURL: apiUrl,\n      headers: {\n        Authorization: `Token ${localStorage.getItem(\"token\")}`\n      }\n    });\n    console.log(`Token ${localStorage.getItem(\"token\")}`);\n    trackPromise(instance.get().then(resp => {\n      console.log(resp);\n      setTimeout(() => {\n        console.log(\"end\");\n      }, 10000);\n      setIsAuth(true);\n    }).catch(err => {\n      console.log(err.status);\n      if (err.status == 401) {\n        setIsAuth(false);\n      }\n    }));\n  }, [setIsAuth]);\n  if (promiseInProgress) {\n    console.log(\"false\");\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 12\n    }, this);\n  } else {\n    if (isAuth) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          children: /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n          children: props.element\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n          children: /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/registration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 14\n      }, this);\n    }\n  }\n}\n_s(Main, \"hqXLVNjrlYs6M5TQoo9J9zXUt0U=\", false, function () {\n  return [usePromiseTracker];\n});\n_c = Main;\nexport default Main;\nvar _c;\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"names":["Footer","Header","trackPromise","usePromiseTracker","useEffect","useState","axios","BrowserRouter","Routes","Route","Navigate","jsxDEV","_jsxDEV","area","apiUrl","Main","props","_s","isAuth","setIsAuth","promiseInProgress","localStorage","length","setItem","console","log","instance","create","baseURL","headers","Authorization","getItem","get","then","resp","setTimeout","catch","err","status","children","fileName","_jsxFileName","lineNumber","columnNumber","className","element","to","_c","$RefreshReg$"],"sources":["/home/user/first_django/frontend/src/components/main/main.js"],"sourcesContent":["import Footer from \"../footer/footer\";\nimport Header from \"../header/header\";\nimport \"./main.css\";\nimport { trackPromise, usePromiseTracker } from \"react-promise-tracker\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\n\nconst area = \"isAuth\";\nconst apiUrl = \"http://127.0.0.1:8000\";\n\nfunction Main(props) {\n  const [isAuth, setIsAuth] = useState(false);\n  const { promiseInProgress } = usePromiseTracker({ area });\n\n  if (localStorage.length === 0) {\n    localStorage.setItem(\"token\", \"\");\n    console.log(\"token\");\n  }\n\n  useEffect(() => {\n    const instance = axios.create({\n      baseURL: apiUrl,\n      headers: { Authorization: `Token ${localStorage.getItem(\"token\")}` },\n    });\n    console.log(`Token ${localStorage.getItem(\"token\")}`);\n    trackPromise(\n      instance\n        .get()\n        .then((resp) => {\n          console.log(resp);\n          setTimeout(()=>{console.log(\"end\")}, 10000)\n          setIsAuth(true);\n        })\n        .catch((err) => {\n          console.log(err.status);\n          if (err.status == 401) {\n            setIsAuth(false);\n          }\n        })\n    );\n  }, [setIsAuth]);\n\n  if (promiseInProgress) {\n    console.log(\"false\");\n    return <h1>Loading...</h1>;\n  } else {\n    if (isAuth) {\n      return (\n        <div className=\"main\">\n          <header>\n            <Header></Header>\n          </header>\n          <main>{props.element}</main>\n          <footer>\n            <Footer></Footer>\n          </footer>\n        </div>\n      );\n    } else {\n      return <Navigate to=\"/registration\"></Navigate>;\n    }\n  }\n}\n\nexport default Main;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"/home/user/first_django/frontend/src/components/main/main.js\",\n  _s = $RefreshSig$();\nimport Footer from \"../footer/footer\";\nimport Header from \"../header/header\";\nimport \"./main.css\";\nimport { trackPromise, usePromiseTracker } from \"react-promise-tracker\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst area = \"isAuth\";\nconst apiUrl = \"http://127.0.0.1:8000\";\nfunction Main(props) {\n  _s();\n  const [isAuth, setIsAuth] = useState(null);\n  const {\n    promiseInProgress\n  } = usePromiseTracker({\n    area\n  });\n  if (localStorage.length === 0) localStorage.setItem(\"token\", \"\");\n  useEffect(() => {\n    const instance = axios.create({\n      baseURL: apiUrl,\n      headers: {\n        Authorization: `Token ${localStorage.getItem(\"token\")}`\n      }\n    });\n    trackPromise(instance.get().then(resp => {\n      setIsAuth(true);\n    }).catch(err => {\n      console.log(err.status);\n      if (err.status == 401) {\n        setIsAuth(false);\n      }\n    }));\n  }, [setIsAuth]);\n  if (promiseInProgress) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 12\n    }, this);\n  } else if (isAuth) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        children: /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        children: props.element\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        children: /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/registration\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this);\n  }\n}\n_s(Main, \"iYo5icmsyIwOzDHs6c72mkXRnvc=\", false, function () {\n  return [usePromiseTracker];\n});\n_c = Main;\nexport default Main;\nvar _c;\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"names":["Footer","Header","trackPromise","usePromiseTracker","useEffect","useState","axios","BrowserRouter","Routes","Route","Navigate","jsxDEV","_jsxDEV","area","apiUrl","Main","props","_s","isAuth","setIsAuth","promiseInProgress","localStorage","length","setItem","instance","create","baseURL","headers","Authorization","getItem","get","then","resp","catch","err","console","log","status","children","fileName","_jsxFileName","lineNumber","columnNumber","className","element","to","_c","$RefreshReg$"],"sources":["/home/user/first_django/frontend/src/components/main/main.js"],"sourcesContent":["import Footer from \"../footer/footer\";\nimport Header from \"../header/header\";\nimport \"./main.css\";\nimport { trackPromise, usePromiseTracker } from \"react-promise-tracker\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\n\nconst area = \"isAuth\";\nconst apiUrl = \"http://127.0.0.1:8000\";\n\nfunction Main(props) {\n  const [isAuth, setIsAuth] = useState(null);\n  const { promiseInProgress } = usePromiseTracker({ area });\n\n  if (localStorage.length === 0) localStorage.setItem(\"token\", \"\");\n\n  useEffect(() => {\n    const instance = axios.create({\n      baseURL: apiUrl,\n      headers: { Authorization: `Token ${localStorage.getItem(\"token\")}` },\n    });\n\n    trackPromise(\n      instance\n        .get()\n        .then((resp) => {\n          setIsAuth(true);\n        })\n        .catch((err) => {\n          console.log(err.status);\n          if (err.status == 401) {\n            setIsAuth(false);\n          }\n        })\n    );\n  }, [setIsAuth]);\n\n  if (promiseInProgress) {\n    return <h1>Loading...</h1>;\n  } else if (isAuth) {\n    return (\n      <div className=\"main\">\n        <header>\n          <Header></Header>\n        </header>\n        <main>{props.element}</main>\n        <footer>\n          <Footer></Footer>\n        </footer>\n      </div>\n    );\n  } else {\n    return (\n    \n        <Navigate to=\"/registration\"></Navigate>\n   \n    );\n  }\n}\n\nexport default Main;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}